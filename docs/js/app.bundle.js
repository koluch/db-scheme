webpackJsonp([0],[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}var u=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(1),s=a(c),d=n(57),p=a(d),y=n(221),h=a(y),b=n(222),m=n(229),v=n(246),T=r(v),g=n(251),_=r(g),S=n(250),w=r(S),A=n(252),E=r(A),P=n(253),O=a(P),k=T.TState||s.default.Any,M=T.TTableState||s.default.Any,C=_.TAction||s.default.Any,x=(w.TPoint||s.default.Any,E.TBounds||s.default.Any,{tables:[{table:{name:"posts",attrs:[{name:"id"},{name:"title"},{name:"user_id"},{name:"body"}],foreignKeys:[]},position:{x:0,y:0}},{table:{name:"comments",attrs:[{name:"id"},{name:"post_id"},{name:"user_id"},{name:"title"},{name:"visible"}],foreignKeys:[]},position:{x:500,y:200}},{table:{name:"users",attrs:[{name:"id"},{name:"name"}],foreignKeys:[]},position:{x:300,y:400}}],dnd:!1,tco:!1,selected:!1,mousePosition:{x:0,y:0}}),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];i(e,k,"state"),i(t,C,"action");var n=function(e,t){var n=this;if("MOVE_TABLE"===t.type){var r=function(){var r=t.table,a=t.position;return{v:f({},e,{tables:e.tables.map(function(e){var t=function(e){return e.table.name===r?f({},e,{position:a}):f({},e)}.call(n,e);return i(t,M,"return value"),t})})}}();if("object"===("undefined"==typeof r?"undefined":l(r)))return r.v}else{if("MOUSE_MOVE"===t.type){var a=t.point;return f({},e,{mousePosition:a})}if("SWITCH_ATTRS"===t.type){var c=function(){var r=t.table,a=t.attr1,l=t.attr2;return{v:f({},e,{tables:e.tables.map(function(e){var t=function(e){if(e.table.name===r){var t=e.table.attrs.map(function(e,t){var n=e.name;return{name:n,i:t}}).filter(function(e){var t=e.name;return t===a}).map(function(e){var t=e.i;return t})[0],n=e.table.attrs.map(function(e,t){var n=e.name;return{name:n,i:t}}).filter(function(e){var t=e.name;return t===l}).map(function(e){var t=e.i;return t})[0],i=[].concat(o(e.table.attrs)),c=i.splice(t,1),s=u(c,1),d=s[0];return i.splice(n,0,d),f({},e,{table:f({},e.table,{attrs:i})})}return f({},e)}.call(n,e);return i(t,M,"return value"),t})})}}();if("object"===("undefined"==typeof c?"undefined":l(c)))return c.v}else if("START_DND"===t.type){var s=t.attrs;if("TABLE"===s.type){var d=s.table,p=t.startPoint;return f({},e,{dnd:{type:"TABLE",table:d,lastPoint:p}})}if("ATTR"===s.type){var y=s.attr,h=s.table,b=t.startPoint;return f({},e,{dnd:{type:"ATTR",attr:y,table:h,startPoint:b,lastPoint:b}})}}else if("UPDATE_DND"===t.type){var m=e.dnd,v=t.lastPoint;if(m!==!1){if("TABLE"===m.type)return f({},e,{dnd:{type:"TABLE",table:m.table,lastPoint:v}});if("ATTR"===m.type)return f({},e,{dnd:{type:"ATTR",attr:m.attr,table:m.table,lastPoint:v}})}}else{if("STOP_DND"===t.type){var T=e.dnd;return T!==!1?f({},e,{dnd:!1}):e}if("SELECT"===t.type){if("TABLE"===t.target){var g=t.table;return f({},e,{selected:{type:"TABLE",table:g}})}if("ATTR"===t.target){var _=t.table,S=t.attr;return f({},e,{selected:{type:"ATTR",table:_,attr:S}})}}else{if("CANCEL_SELECT"===t.type)return f({},e,{selected:!1});if("START_TCO"===t.type){if("ADD_LINK"===t.attrs.type){var w=t.attrs,A=w.attr,E=w.table;return f({},e,{tco:{type:"ADD_LINK",attr:A,table:E}})}}else{if("STOP_TCO"===t.type)return f({},e,{tco:!1});if("ADD_LINK"===t.type){var P=function(){var n=t.from,r=t.to;return{v:f({},e,{tables:e.tables.map(function(e){if(e.table.name===n.table){var t=e.table.foreignKeys.filter(function(e){return!(e.from.attr===n.attr)});return f({},e,{table:f({},e.table,{foreignKeys:t.concat([{from:{attr:n.attr},to:r}])})})}return e})})}}();if("object"===("undefined"==typeof P?"undefined":l(P)))return P.v}else if("DELETE_LINK"===t.type){var O=function(){var n=t.table,r=t.attr;return{v:f({},e,{tables:e.tables.map(function(e){return e.table.name===n?f({},e,{table:f({},e.table,{foreignKeys:e.table.foreignKeys.filter(function(e){return!(e.from.attr===r)})})}):e})})}}();if("object"===("undefined"==typeof O?"undefined":l(O)))return O.v}else if("DELETE_ATTR"===t.type){var k=function(){var n=e.selected,r=t.table,a=t.attr,o=(n===!1||"ATTR"!==n.type||n.table!==r||n.table!==r||n.attr!==a)&&n;return{v:f({},e,{tables:e.tables.map(function(e){return e.table.name===r?f({},e,{table:f({},e.table,{attrs:e.table.attrs.filter(function(e){var t=e.name;return t!==a}),foreignKeys:e.table.foreignKeys.filter(function(e){var t=e.from;return!(t.attr===a)})})}):f({},e,{table:f({},e.table,{foreignKeys:e.table.foreignKeys.filter(function(e){var t=e.to;return!(t.table===r&&t.attr===a)})})})}),selected:o})}}();if("object"===("undefined"==typeof k?"undefined":l(k)))return k.v}else if("DELETE_TABLE"===t.type){var C=function(){var n=e.selected,r=t.table,a=e.tables.filter(function(e){return e.table.name!==r}),o=(n===!1||"TABLE"!==n.type||n.table!==r)&&n;return{v:f({},e,{tables:a.map(function(e){return f({},e,{table:f({},e.table,{foreignKeys:e.table.foreignKeys.filter(function(e){var t=e.to;return t.table!==r})})})}),selected:o})}}();if("object"===("undefined"==typeof C?"undefined":l(C)))return C.v}else if("ADD_ATTR"===t.type){var x=function(){var n=t.table,r=t.attr;return{v:f({},e,{tables:e.tables.map(function(e){return e.table.name===n?f({},e,{table:f({},e.table,{attrs:e.table.attrs.filter(function(e){var t=e.name;return t!==r.name}).concat([r])})}):e})})}}();if("object"===("undefined"==typeof x?"undefined":l(x)))return x.v}else if("ADD_TABLE"===t.type){var j=function(){var n=t.table;return{v:f({},e,{tables:e.tables.filter(function(e){var t=e.table.name;return t!==n.name}).concat([{position:{x:0,y:0},table:n}])})}}();if("object"===("undefined"==typeof j?"undefined":l(j)))return j.v}}}}}return e}.call(void 0,e,t);return i(n,k,"return value"),n},D=(0,m.createStore)(j);document.addEventListener("DOMContentLoaded",function(){p.default.render(h.default.createElement(b.Provider,{store:D},h.default.createElement(O.default,null)),document.getElementById("react"))})},function(e,t,n){/*! @preserve
	 *
	 * tcomb.js - Type checking and DDD for JavaScript
	 *
	 * The MIT License (MIT)
	 *
	 * Copyright (c) 2014-2016 Giulio Canti
	 *
	 */
var r=n(2);r.Any=n(8),r.Array=n(16),r.Boolean=n(17),r.Date=n(19),r.Error=n(20),r.Function=n(21),r.Nil=n(22),r.Number=n(23),r.Integer=n(25),r.IntegerT=r.Integer,r.Object=n(31),r.RegExp=n(32),r.String=n(33),r.Type=n(34),r.TypeT=r.Type,r.Arr=r.Array,r.Bool=r.Boolean,r.Dat=r.Date,r.Err=r.Error,r.Func=r.Function,r.Num=r.Number,r.Obj=r.Object,r.Re=r.RegExp,r.Str=r.String,r.dict=n(35),r.declare=n(36),r.enums=n(39),r.irreducible=n(9),r.list=n(40),r.maybe=n(41),r.refinement=n(26),r.struct=n(43),r.tuple=n(49),r.union=n(50),r.func=n(51),r.intersection=n(52),r.subtype=r.refinement,r.inter=n(53),r.interface=r.inter,r.assert=r,r.update=n(55),r.mixin=n(37),r.isType=n(13),r.is=n(30),r.getTypeName=n(12),r.match=n(56),e.exports=r},function(e,t,n){function r(e,t){e!==!0&&(a(t)?t=t():o(t)&&(t='Assert failed (turn on "Pause on exceptions" in your Source panel)'),r.fail(t))}var a=n(3),o=n(4),i=n(5),u=n(6);r.fail=i,r.stringify=u,e.exports=r},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t){e.exports=function(e){return null===e||void 0===e}},function(e,t){e.exports=function(e){throw new TypeError("[tcomb] "+e)}},function(e,t,n){function r(e,t){return"function"==typeof t?a(t):t}var a=n(7);e.exports=function(e){try{return JSON.stringify(e,r,2)}catch(t){return String(e)}}},function(e,t){e.exports=function(e){return e.displayName||e.name||"<function"+e.length+">"}},function(e,t,n){var r=n(9);e.exports=r("Any",function(){return!0})},function(e,t,n){n(2),n(10),n(3),n(11);e.exports=function(e,t){function n(e,t){return e}return n.meta={kind:"irreducible",name:e,predicate:t,identity:!0},n.displayName=e,n.is=t,n}},function(e,t){e.exports=function(e){return"string"==typeof e}},function(e,t,n){var r=n(2),a=n(12);e.exports=function(e,t){r(!(e instanceof t),function(){return"Cannot use the new operator to instantiate the type "+a(t)})}},function(e,t,n){var r=n(13),a=n(7);e.exports=function(e){return r(e)?e.displayName:a(e)}},function(e,t,n){var r=n(3),a=n(14);e.exports=function(e){return r(e)&&a(e.meta)}},function(e,t,n){var r=n(4),a=n(15);e.exports=function(e){return!r(e)&&"object"==typeof e&&!a(e)}},function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):e instanceof Array}},function(e,t,n){var r=n(9),a=n(15);e.exports=r("Array",a)},function(e,t,n){var r=n(9),a=n(18);e.exports=r("Boolean",a)},function(e,t){e.exports=function(e){return e===!0||e===!1}},function(e,t,n){var r=n(9);e.exports=r("Date",function(e){return e instanceof Date})},function(e,t,n){var r=n(9);e.exports=r("Error",function(e){return e instanceof Error})},function(e,t,n){var r=n(9),a=n(3);e.exports=r("Function",a)},function(e,t,n){var r=n(9),a=n(4);e.exports=r("Nil",a)},function(e,t,n){var r=n(9),a=n(24);e.exports=r("Number",a)},function(e,t){e.exports=function(e){return"number"==typeof e&&isFinite(e)&&!isNaN(e)}},function(e,t,n){var r=n(26),a=n(23);e.exports=r(a,function(e){return e%1===0},"Integer")},function(e,t,n){function r(e,t){return"{"+f(e)+" | "+c(t)+"}"}function a(e,t,n){function a(t,n){var r=u(e,t,n);return r}var f=n||r(e,t),c=i(e);return a.meta={kind:"subtype",type:e,predicate:t,name:n,identity:c},a.displayName=f,a.is=function(n){return l(n,e)&&t(n)},a.update=function(e,t){return a(o.update(e,t))},a}var o=n(2),i=(n(27),n(3),n(11),n(28)),u=n(29),l=n(30),f=n(12),c=n(7);a.getDefaultName=r,e.exports=a},function(e,t,n){var r=n(4),a=n(10);e.exports=function(e){return r(e)||a(e)}},function(e,t,n){var r=(n(2),n(17),n(13));n(12);e.exports=function(e){return!r(e)||e.meta.identity}},function(e,t,n){var r=n(13);n(7),n(2),n(6);e.exports=function(e,t,n){return r(e)?e.meta.identity||"object"!=typeof t||null===t?e(t,n):new e(t,n):t}},function(e,t,n){var r=n(13);e.exports=function(e,t){return r(t)?t.is(e):e instanceof t}},function(e,t,n){var r=n(9),a=n(14);e.exports=r("Object",a)},function(e,t,n){var r=n(9);e.exports=r("RegExp",function(e){return e instanceof RegExp})},function(e,t,n){var r=n(9),a=n(10);e.exports=r("String",a)},function(e,t,n){var r=n(9),a=n(13);e.exports=r("Type",a)},function(e,t,n){function r(e,t){return"{[key: "+i(e)+"]: "+i(t)+"}"}function a(e,t,n){function a(n,r){if(d)return n;var a=!0,o={};for(var i in n)if(n.hasOwnProperty(i)){i=f(e,i,null);var u=n[i],l=f(t,u,null);a=a&&u===l,o[i]=l}return a&&(o=n),o}var s=n||r(e,t),d=(i(e),i(t),u(e)&&u(t));return a.meta={kind:"dict",domain:e,codomain:t,name:n,identity:d},a.displayName=s,a.is=function(n){if(!l(n))return!1;for(var r in n)if(n.hasOwnProperty(r)&&(!c(r,e)||!c(n[r],t)))return!1;return!0},a.update=function(e,t){return a(o.update(e,t))},a}var o=n(2),i=(n(27),n(3),n(12)),u=n(28),l=n(14),f=n(29),c=n(30);a.getDefaultName=r,e.exports=a},function(e,t,n){var r=(n(2),n(27),n(13),n(4),n(37)),a=n(12),o=n(38),i=1;e.exports=function(e){function t(e,t){return n(e,t)}var n;return t.define=function(a){return o(a)&&t.hasOwnProperty("dispatch")&&(a.dispatch=t.dispatch),n=a,r(t,n,!0),e&&(n.displayName=t.displayName=e,t.meta.name=e),t.meta.identity=n.meta.identity,t.prototype=n.prototype,t},t.displayName=e||a(t)+"$"+i++,t.meta={identity:!1},t.prototype=null,t}},function(e,t,n){var r=n(4);n(2);e.exports=function(e,t,n){if(r(t))return e;for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}},function(e,t,n){var r=n(13);e.exports=function(e){return r(e)&&"union"===e.meta.kind}},function(e,t,n){function r(e){return Object.keys(e).map(function(e){return o.stringify(e)}).join(" | ")}function a(e,t){function n(e,t){return e}var a=t||r(e);return n.meta={kind:"enums",map:e,name:t,identity:!0},n.displayName=a,n.is=function(t){return e.hasOwnProperty(t)},n}var o=n(2),i=(n(27),n(11),n(10));n(14);a.of=function(e,t){e=i(e)?e.split(" "):e;var n={};return e.forEach(function(e){n[e]=e}),a(n,t)},a.getDefaultName=r,e.exports=a},function(e,t,n){function r(e){return"Array<"+i(e)+">"}function a(e,t){function n(t,n){if(s)return t;for(var r=!0,a=[],o=0,i=t.length;o<i;o++){var u=t[o],f=l(e,u,null);r=r&&u===f,a.push(f)}return r&&(a=t),a}var a=t||r(e),s=(i(e),u(e));return n.meta={kind:"list",type:e,name:t,identity:s},n.displayName=a,n.is=function(t){return c(t)&&t.every(function(t){return f(t,e)})},n.update=function(e,t){return n(o.update(e,t))},n}var o=n(2),i=(n(27),n(3),n(12)),u=n(28),l=n(29),f=n(30),c=n(15);a.getDefaultName=r,e.exports=a},function(e,t,n){function r(e){return"?"+s(e)}function a(e,t){function n(t,n){return f.is(t)?t:l(e,t,n)}if(o(e)||e===u||e===f)return e;var a=t||r(e),s=i(e);return n.meta={kind:"maybe",type:e,name:t,identity:s},n.displayName=a,n.is=function(t){return f.is(t)||c(t,e)},n}var o=(n(2),n(27),n(3),n(42)),i=n(28),u=n(8),l=n(29),f=n(22),c=(n(11),n(30)),s=n(12);a.getDefaultName=r,e.exports=a},function(e,t,n){var r=n(13);e.exports=function(e){return r(e)&&"maybe"===e.meta.kind}},function(e,t,n){function r(e){return"Struct"+s(e)}function a(e,t){return d(i,e,t)}function o(e){return l(e)||(e=f(e)?{}:{name:e}),e.hasOwnProperty("strict")||(e.strict=i.strict),e.hasOwnProperty("defaultProps")||(e.defaultProps={}),e}function i(e,t){function n(t,r){if(n.is(t))return t;if(!(this instanceof n))return new n(t,r);for(var a in e)if(e.hasOwnProperty(a)){var o=e[a],i=t[a];void 0===i&&(i=f[a]),this[a]=c(o,i,null)}}t=o(t);var i=t.name,l=t.strict,f=t.defaultProps,s=i||r(e);return n.meta={kind:"struct",props:e,name:i,identity:!1,strict:l,defaultProps:f},n.displayName=s,n.is=function(e){return e instanceof n},n.update=function(e,t){return new n(u.update(e,t))},n.extend=function(e,t){return a([n].concat(e),t)},n}var u=n(2),l=(n(27),n(33),n(21),n(18),n(14)),f=n(4),c=n(29),s=(n(12),n(35),n(44)),d=n(45);i.strict=!1,i.getOptions=o,i.getDefaultName=r,i.extend=a,e.exports=i},function(e,t,n){function r(e){return"{"+Object.keys(e).map(function(t){return t+": "+a(e[t])}).join(", ")+"}"}var a=n(12);e.exports=r},function(e,t,n){function r(e,t){return e.reduce(function(e,t){return c(e,t)},t)}function a(e){return f(e)?e:e.meta.props}function o(e){return f(e)?null:e.meta.defaultProps}function i(e,t){Array.prototype.push.apply(e,t)}function u(e,t,n){var u={},f={},c=[],d={};t.forEach(function(e,t){var n=s(e),r=n.unrefinedType;i(c,n.predicates),l(u,a(r)),l(f,r.prototype),l(d,o(r),!0)}),n=e.getOptions(n),n.defaultProps=l(d,n.defaultProps,!0);var p=r(c,e(u,n));return l(p.prototype,f),p}var l=(n(2),n(3),n(15),n(37)),f=(n(46),n(47),n(14)),c=n(26),s=n(48);e.exports=u},function(e,t,n){var r=n(13);e.exports=function(e){return r(e)&&"struct"===e.meta.kind}},function(e,t,n){var r=n(13);e.exports=function(e){return r(e)&&"interface"===e.meta.kind}},function(e,t,n){function r(e){return u(e)&&"subtype"===e.meta.kind}function a(e){return r(e)?[e.meta.predicate].concat(a(e.meta.type)):[]}function o(e){return r(e)?o(e.meta.type):e}function i(e){return{predicates:a(e),unrefinedType:o(e)}}var u=n(13);e.exports=i},function(e,t,n){function r(e){return"["+e.map(i).join(", ")+"]"}function a(e,t){function n(t,n){if(i)return t;for(var r=!0,a=[],o=0,u=e.length;o<u;o++){var l=e[o],c=t[o],s=f(l,c,null);r=r&&c===s,a.push(s)}return r&&(a=t),a}var a=t||r(e),i=e.every(u);return n.meta={kind:"tuple",types:e,name:t,identity:i},n.displayName=a,n.is=function(t){return l(t)&&t.length===e.length&&e.every(function(e,n){return c(t[n],e)})},n.update=function(e,t){return n(o.update(e,t))},n}var o=n(2),i=(n(27),n(3),n(12)),u=n(28),l=n(15),f=n(29),c=n(30);a.getDefaultName=r,e.exports=a},function(e,t,n){function r(e){return e.map(i).join(" | ")}function a(e,t){function n(e,t){if(i)return e;var r=n.dispatch(e);return!r&&n.is(e)?e:l(r,e,t)}var a=t||r(e),i=e.every(u);return n.meta={kind:"union",types:e,name:t,identity:i},n.displayName=a,n.is=function(t){return e.some(function(e){return f(t,e)})},n.dispatch=function(t){for(var n=0,r=e.length;n<r;n++){var a=e[n];if(c(a)){var o=a.dispatch(t);if(!s(o))return o}else if(f(t,a))return a}},n.update=function(e,t){return n(o.update(e,t))},n}var o=n(2),i=(n(27),n(3),n(12)),u=n(28),l=(n(15),n(29)),f=n(30),c=(n(11),n(38)),s=n(4);a.getDefaultName=r,e.exports=a},function(e,t,n){function r(e,t){return"("+e.map(d).join(", ")+") => "+d(t)}function a(e){return u.is(e)&&f(e.instrumentation)}function o(e){for(var t=e.length,n=!1,r=t-1;r>=0;r--){var a=e[r];if(!p(a)||"maybe"!==a.meta.kind)return r+1;n=!0}return n?0:t}function i(e,t,n){function u(e,t){return a(e)?e:u.of(e)}e=l(e)?e:[e];var f=n||r(e,t),d=e.length;o(e);return u.meta={kind:"func",domain:e,codomain:t,name:n,identity:!0},u.displayName=f,u.is=function(n){return a(n)&&n.instrumentation.domain.length===d&&n.instrumentation.domain.every(function(t,n){return t===e[n]})&&n.instrumentation.codomain===t},u.of=function(n,r){function a(){var a=Array.prototype.slice.call(arguments),o=a.length;if(r&&o<d){var u=Function.prototype.bind.apply(n,[this].concat(a)),l=i(e.slice(o),t);return l.of(u,!0)}return c(t,n.apply(this,a))}return u.is(n)?n:(a.instrumentation={domain:e,codomain:t,f:n},a.displayName=s(n),a)},u}var u=(n(2),n(27),n(21)),l=n(15),f=(n(40),n(14)),c=n(29),s=(n(4),n(18),n(49),n(7)),d=n(12),p=n(13);i.getDefaultName=r,i.getOptionalArgumentsIndex=o,e.exports=i},function(e,t,n){function r(e){return e.map(u).join(" & ")}function a(e,t){function n(e,t){return e}var a=t||r(e),u=e.every(l);return n.meta={kind:"intersection",types:e,name:t,identity:u},n.displayName=a,n.is=function(t){return e.every(function(e){return i(t,e)})},n.update=function(e,t){return n(o.update(e,t))},n}var o=n(2),i=(n(27),n(3),n(15),n(28),n(30)),u=n(12),l=n(28);a.getDefaultName=r,e.exports=a},function(e,t,n){function r(e,t){return p(o,e,t)}function a(e){return u(e)||(e=l(e)?{}:{name:e}),e.hasOwnProperty("strict")||(e.strict=o.strict),e}function o(e,t){function n(t,n){if(h)return t;var r=!0,a=h?{}:y({},t);for(var o in e){var i=e[o],u=t[o],l=f(i,u,null);r=r&&u===l,a[o]=l}return r&&(a=t),a}t=a(t);var o=t.name,u=t.strict,p=o||c(e),h=Object.keys(e).map(function(t){return e[t]}).every(s);return n.meta={kind:"interface",props:e,name:o,identity:h,strict:u},n.displayName=p,n.is=function(t){if(l(t))return!1;if(u)for(var n in t)if(!e.hasOwnProperty(n))return!1;for(var r in e)if(!d(t[r],e[r]))return!1;return!0},n.update=function(e,t){return n(i.update(e,t))},n.extend=function(e,t){return r([n].concat(e),t)},n}var i=n(2),u=(n(27),n(33),n(21),n(18),n(14)),l=n(4),f=n(29),c=(n(12),n(35),n(44)),s=n(28),d=n(30),p=n(45),y=n(54);o.strict=!1,o.getOptions=a,o.getDefaultName=c,o.extend=r,e.exports=o},function(e,t){function n(e,t){for(var n in t)e[n]=t[n];return e}e.exports=n},function(e,t,n){function r(e){return h(e)?e instanceof Date||e instanceof RegExp?e:m({},e):b(e)?e.concat():e}function a(e){return i.commands.hasOwnProperty(e)}function o(e){return i.commands[e]}function i(e,t){var n,u=e,l=!1;for(var f in t)t.hasOwnProperty(f)&&(a(f)?(n=o(f)(t[f],u),n!==e?(l=!0,u=n):u=e):(u===e&&(u=r(e)),n=i(u[f],t[f]),l=l||n!==u[f],u[f]=n));return l?u:e}function u(e,t){return e(t)}function l(e,t){return e.length>0?t.concat(e):t}function f(e,t){if(e.length>0){t=r(t);for(var n=0,a=e.length;n<a;n++)delete t[e[n]]}return t}function c(e){return e}function s(e,t){return e.length>0?(t=r(t),e.reduce(function(e,t){return e.splice.apply(e,t),e},t)):t}function d(e,t){if(e.from!==e.to){t=r(t);var n=t[e.to];t[e.to]=t[e.from],t[e.from]=n}return t}function p(e,t){return e.length>0?e.concat(t):t}function y(e,t){var n=!1,a=r(t);for(var o in e)e.hasOwnProperty(o)&&(a[o]=e[o],n=n||a[o]!==t[o]);return n?a:t}var h=(n(2),n(14)),b=(n(3),n(15)),m=(n(24),n(54));i.commands={$apply:u,$push:l,$remove:f,$set:c,$splice:s,$swap:d,$unshift:p,$merge:y},e.exports=i},function(e,t,n){var r=n(2),a=n(3),o=n(13),i=n(8);e.exports=function(e){for(var t,n,u,l=1,f=arguments.length;l<f;)if(t=arguments[l],n=arguments[l+1],u=arguments[l+2],a(u)&&!o(u)?l+=3:(u=n,n=i.is,l+=2),t.is(e)&&n(e))return u(e);r.fail("Match error")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var a=n(223),o=r(a),i=n(226),u=r(i);t.Provider=o.default,t.connect=u.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.default=void 0;var u=n(221),l=n(224),f=r(l),c=n(225),s=(r(c),function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,n,r));return i.store=n.store,i}return i(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){return u.Children.only(this.props.children)},t}(u.Component));t.default=s,s.propTypes={store:f.default.isRequired,children:u.PropTypes.element.isRequired},s.childContextTypes={store:f.default.isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(221);t.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e.displayName||e.name||"Component"}function l(e,t){try{return e.apply(t)}catch(e){return O.value=e,O}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=Boolean(e),d=e||A,y=void 0;y="function"==typeof t?t:t?(0,m.default)(t):E;var b=n||P,v=r.pure,T=void 0===v||v,g=r.withRef,S=void 0!==g&&g,M=T&&b!==P,C=k++;return function(e){function t(e,t,n){var r=b(e,t,n);return r}var n="Connect("+u(e)+")",r=function(r){function u(e,t){a(this,u);var i=o(this,r.call(this,e,t));i.version=C,i.store=e.store||t.store,(0,w.default)(i.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var l=i.store.getState();return i.state={storeState:l},i.clearCache(),i}return i(u,r),u.prototype.shouldComponentUpdate=function(){return!T||this.haveOwnPropsChanged||this.hasStoreStateChanged},u.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},u.prototype.configureFinalMapState=function(e,t){var n=d(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:d,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},u.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},u.prototype.configureFinalMapDispatch=function(e,t){var n=y(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:y,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},u.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,h.default)(e,this.stateProps))&&(this.stateProps=e,!0)},u.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,h.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},u.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&M&&(0,h.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},u.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},u.prototype.trySubscribe=function(){f&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},u.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},u.prototype.componentDidMount=function(){this.trySubscribe()},u.prototype.componentWillReceiveProps=function(e){T&&(0,h.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},u.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},u.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},u.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!T||t!==e){if(T&&!this.doStatePropsDependOnOwnProps){var n=l(this.updateStatePropsIfNeeded,this);if(!n)return;n===O&&(this.statePropsPrecalculationError=O.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},u.prototype.getWrappedInstance=function(){return(0,w.default)(S,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},u.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,a=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,a)throw a;var i=!0,u=!0;T&&o&&(i=n||t&&this.doStatePropsDependOnOwnProps,u=t&&this.doDispatchPropsDependOnOwnProps);var l=!1,f=!1;r?l=!0:i&&(l=this.updateStatePropsIfNeeded()),u&&(f=this.updateDispatchPropsIfNeeded());var d=!0;return d=!!(l||f||t)&&this.updateMergedPropsIfNeeded(),!d&&o?o:(S?this.renderedElement=(0,s.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,s.createElement)(e,this.mergedProps),this.renderedElement)},u}(s.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:p.default},r.propTypes={store:p.default},(0,_.default)(r,e)}}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=f;var s=n(221),d=n(224),p=r(d),y=n(227),h=r(y),b=n(228),m=r(b),v=n(225),T=(r(v),n(231)),g=(r(T),n(244)),_=r(g),S=n(245),w=r(S),A=function(e){return{}},E=function(e){return{dispatch:e}},P=function(e,t,n){return c({},n,e,t)},O={value:null},k=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!a.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,a.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var a=n(229)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var a=n(230),o=r(a),i=n(239),u=r(i),l=n(241),f=r(l),c=n(242),s=r(c),d=n(243),p=r(d),y=n(240);r(y);t.createStore=o.default,t.combineReducers=u.default,t.bindActionCreators=f.default,t.applyMiddleware=s.default,t.compose=p.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){function r(){m===b&&(m=b.slice())}function o(){return h}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),m.push(e),function(){if(t){t=!1,r();var n=m.indexOf(e);m.splice(n,1)}}}function c(e){if(!(0,i.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,h=y(h,e)}finally{v=!1}for(var t=b=m,n=0;n<t.length;n++)t[n]();return e}function s(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");y=e,c({type:f.INIT})}function d(){var e,t=u;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[l.default]=function(){return this},e}var p;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var y=e,h=t,b=[],m=b,v=!1;return c({type:f.INIT}),p={dispatch:c,subscribe:u,getState:o,replaceReducer:s},p[l.default]=d,p}t.__esModule=!0,t.ActionTypes=void 0,t.default=a;var o=n(231),i=r(o),u=n(235),l=r(u),f=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){function r(e){if(!o(e)||d.call(e)!=i)return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&f.call(n)==s}var a=n(232),o=n(234),i="[object Object]",u=Function.prototype,l=Object.prototype,f=u.toString,c=l.hasOwnProperty,s=f.call(Object),d=l.toString;e.exports=r},function(e,t,n){var r=n(233),a=r(Object.getPrototypeOf,Object);e.exports=a},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){e.exports=n(236)},function(e,t,n){(function(e,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(238),u=a(i);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:r;var l=(0,u.default)(o);t.default=l}).call(t,function(){return this}(),n(237)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:u.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var a="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:a}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+u.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function i(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var u,l=Object.keys(n);try{o(n)}catch(e){u=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(u)throw u;for(var r=!1,o={},i=0;i<l.length;i++){var f=l[i],c=n[f],s=e[f],d=c(s,t);if("undefined"==typeof d){var p=a(f,t);throw new Error(p)}o[f]=d,r=r||d!==s}return r?o:e}}t.__esModule=!0,t.default=i;var u=n(230),l=n(231),f=(r(l),n(240));r(f)},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),a={},o=0;o<r.length;o++){var i=r[o],u=e[i];"function"==typeof u&&(a[i]=n(u,t))}return a}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,a){var i=e(n,r,a),l=i.dispatch,f=[],c={getState:i.getState,dispatch:function(e){return l(e)}};return f=t.map(function(e){return e(c)}),l=u.default.apply(void 0,f)(i.dispatch),o({},i,{dispatch:l})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var i=n(243),u=r(i)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],a=t.slice(0,-1);return function(){return a.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.__esModule=!0,t.default=n},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},a="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,o){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);a&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var u=0;u<i.length;++u)if(!(n[i[u]]||r[i[u]]||o&&o[i[u]]))try{e[i[u]]=t[i[u]]}catch(e){}}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,a,o,i,u){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,a,o,i,u],c=0;l=new Error(t.replace(/%s/g,function(){return f[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TState=t.TSelected=t.TTco=t.TLinkState=t.TTableState=t.TDndTarget=t.TDndTargetType=void 0;var a=n(1),o=r(a),i=n(247),u=n(249),l=n(250),f=(t.TDndTargetType=o.default.enums.of(["TABLE"],"TDndTargetType"),t.TDndTarget=o.default.union([o.default.refinement(o.default.Boolean,function(e){return e===!1}),o.default.interface({type:o.default.enums.of(["TABLE"]),table:o.default.String,lastPoint:l.TPoint}),o.default.interface({type:o.default.enums.of(["ATTR"]),attr:o.default.String,table:o.default.String,lastPoint:l.TPoint})],"TDndTarget")),c=t.TTableState=o.default.interface({table:i.TTable,position:l.TPoint},"TTableState"),s=(t.TLinkState=o.default.interface({link:u.TLink},"TLinkState"),t.TTco=o.default.union([o.default.refinement(o.default.Boolean,function(e){return e===!1}),o.default.interface({type:o.default.enums.of(["ADD_LINK"]),table:o.default.String,attr:o.default.String})],"TTco")),d=t.TSelected=o.default.union([o.default.refinement(o.default.Boolean,function(e){return e===!1}),o.default.interface({type:o.default.enums.of(["TABLE"]),table:o.default.String}),o.default.interface({type:o.default.enums.of(["ATTR"]),table:o.default.String,attr:o.default.String}),o.default.interface({type:o.default.enums.of(["LINK"]),from:o.default.interface({table:o.default.String,attr:o.default.String}),to:o.default.interface({table:o.default.String,attr:o.default.String})})],"TSelected");t.TState=o.default.interface({tables:o.default.list(c),selected:d,mousePosition:l.TPoint,dnd:f,tco:s},"TState")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TTable=t.TForeignKey=void 0;var a=n(1),o=r(a),i=n(248),u=t.TForeignKey=o.default.interface({from:o.default.interface({attr:o.default.String}),to:o.default.interface({table:o.default.String,attr:o.default.String})},"TForeignKey");t.TTable=o.default.interface({name:o.default.String,attrs:o.default.list(i.TAttr),foreignKeys:o.default.list(u)},"TTable")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return i.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+i.default.getTypeName(t)]):e instanceof t||i.default.fail("Invalid value "+i.default.stringify(e)+" supplied to "+n+" (expected a "+i.default.getTypeName(t)+")"),
e}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=t.TAttr=void 0;var o=n(1),i=r(o),u=t.TAttr=i.default.interface({name:i.default.String},"TAttr");t.equals=function(e,t){return a(e,u,"x"),a(t,u,"y"),e.name===t.name}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TLink=void 0;var a=n(1),o=r(a);t.TLink=o.default.interface({from:o.default.interface({table:o.default.String,attr:o.default.String}),to:o.default.interface({table:o.default.String,attr:o.default.String})},"TLink")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TPoint=void 0;var a=n(1),o=r(a);t.TPoint=o.default.interface({x:o.default.Number,y:o.default.Number},"TPoint")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TAction=void 0;var a=n(1),o=r(a),i=n(250),u=n(248),l=n(247),f=o.default.interface({type:o.default.enums.of(["@@redux/INIT"])},"TActionInit"),c=o.default.union([o.default.interface({type:o.default.enums.of(["TABLE"]),table:o.default.String}),o.default.interface({type:o.default.enums.of(["ATTR"]),attr:o.default.String,table:o.default.String})],"TDndAttrs"),s=o.default.interface({type:o.default.enums.of(["ADD_LINK"]),table:o.default.String,attr:o.default.String},"TTcoAttrs");t.TAction=o.default.union([f,o.default.interface({type:o.default.enums.of(["SELECT"]),target:o.default.enums.of(["TABLE"]),table:o.default.String}),o.default.interface({type:o.default.enums.of(["SELECT"]),target:o.default.enums.of(["ATTR"]),table:o.default.String,attr:o.default.String}),o.default.interface({type:o.default.enums.of(["CANCEL_SELECT"])}),o.default.interface({type:o.default.enums.of(["MOVE_TABLE"]),table:o.default.String,position:i.TPoint}),o.default.interface({type:o.default.enums.of(["SWITCH_ATTRS"]),table:o.default.String,attr1:o.default.String,attr2:o.default.String}),o.default.interface({type:o.default.enums.of(["START_DND"]),attrs:c,startPoint:i.TPoint}),o.default.interface({type:o.default.enums.of(["UPDATE_DND"]),lastPoint:i.TPoint}),o.default.interface({type:o.default.enums.of(["STOP_DND"]),point:i.TPoint}),o.default.interface({type:o.default.enums.of(["MOUSE_MOVE"]),point:i.TPoint}),o.default.interface({type:o.default.enums.of(["START_TCO"]),attrs:s}),o.default.interface({type:o.default.enums.of(["STOP_TCO"])}),o.default.interface({type:o.default.enums.of(["ADD_LINK"]),from:o.default.interface({table:o.default.String,attr:o.default.String}),to:o.default.interface({table:o.default.String,attr:o.default.String})}),o.default.interface({type:o.default.enums.of(["ADD_ATTR"]),table:o.default.String,attr:u.TAttr}),o.default.interface({type:o.default.enums.of(["ADD_TABLE"]),table:l.TTable}),o.default.interface({type:o.default.enums.of(["DELETE_LINK"]),table:o.default.String,attr:o.default.String}),o.default.interface({type:o.default.enums.of(["DELETE_ATTR"]),table:o.default.String,attr:o.default.String}),o.default.interface({type:o.default.enums.of(["DELETE_TABLE"]),table:o.default.String})],"TAction")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TBounds=void 0;var a=n(1),o=r(a);t.TBounds=o.default.interface({x:o.default.Number,y:o.default.Number,width:o.default.Number,height:o.default.Number},"TBounds")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return d.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+d.default.getTypeName(t)]):e instanceof t||d.default.fail("Invalid value "+d.default.stringify(e)+" supplied to "+n+" (expected a "+d.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(1),d=a(s),p=n(221),y=a(p),h=n(222),b=n(229),m=r(b),v=n(254),T=r(v),g=n(255),_=r(g),S=n(246),w=r(S),A=n(251),E=r(A),P=n(248),O=r(P),k=n(252),M=r(k),C=n(250),x=r(C),j=n(247),D=r(j),N=n(256),L=r(N),I=n(257),B=r(I),R=n(259),F=a(R),z=n(273),K=a(z),U=n(276),H=a(U),W=n(278),q=a(W),X=n(274),$=r(X),Y=n(279),V=r(Y),G=n(281),J=m.Dispatch||d.default.Any,Q=T.TTableShape||d.default.Any,Z=_.TLinkShape||d.default.Any,ee=w.TState||d.default.Any,te=w.TTableState||d.default.Any,ne=w.TSelected||d.default.Any,re=(E.TAction||d.default.Any,O.TAttr||d.default.Any),ae=M.TBounds||d.default.Any,oe=x.TPoint||d.default.Any,ie=D.TTable||d.default.Any,ue=L.TPath||d.default.Any,le=B.TSchemeMetrics||d.default.Any,fe=function(e,t){l(e,ae,"b1"),l(t,ae,"b2");var n=function(e,t){var n=null,r=null;e.x<t.x?(n={x:e.x+e.width,y:e.y+e.height/2},r={x:t.x,y:t.y+t.height/2}):(n={x:e.x,y:e.y+e.height/2},r={x:t.x+t.width,y:t.y+t.height/2});var a=n,o=r,i={x:a.x+(o.x-a.x)/2,y:a.y},u={x:i.x,y:o.y};return[n,i,u,r]}.call(void 0,e,t);return l(n,d.default.list(oe),"return value"),n},ce=function(e){l(e,ee,"state");var t=function(e){var t=this,n=e.tables,r=e.dnd,a=e.tco,o=e.mousePosition,i=V.scheme(e),u=null;a!==!1&&"ADD_LINK"===a.type&&!function(){var e=a.table,t=a.attr,r=n.filter(function(t){return t.table.name===e})[0];if(!r)throw new Error('Table "'+e+"\" doesn't exists, unable to draw link");var l=r.table.attrs.filter(function(e){return e.name===t})[0];if(!l)throw new Error('Attribute "'+e+"."+t+"\" doesn't exists, unable to draw link");var f=i.tables.filter(function(e){var t=e.name;return t===r.table.name})[0].metrics,s=$.getAttrBounds(f,r.position,l.name);if(!s)throw new Error('Unable to get attribue bounds for\n                 attribute "'+e+"."+t+'": attribute doesnt exists');var d=c({},o,{width:0,height:0});u=fe(s,d)}();var f=e.tables.map(function(e){var t=e.table;return t.foreignKeys.map(function(e){var n=e.from,r=e.to;return{from:c({},n,{table:t.name}),to:r}}).map(function(e){var t=e.from,r=e.to,a=n.filter(function(e){return e.table.name===t.table})[0];if(!a)throw new Error('Table "'+t.table+"\" doesn't exists, unable to draw link");var o=n.filter(function(e){return e.table.name===r.table})[0];if(!o)throw new Error('Table "'+r.table+"\" doesn't exists, unable to draw link");var u=a.table.attrs.filter(function(e){return e.name===t.attr})[0];if(!u)throw new Error('Attribute "'+t.table+"."+t.attr+"\" doesn't exists, unable to draw link");var l=o.table.attrs.filter(function(e){return e.name===r.attr})[0];if(!l)throw new Error('Attribute "'+r.table+"."+r.attr+"\" doesn't exists, unable to draw link");var f=i.tables.filter(function(e){var t=e.name;return t===a.table.name})[0].metrics,c=i.tables.filter(function(e){var t=e.name;return t===o.table.name})[0].metrics,s={x:a.position.x,y:a.position.y},d={x:o.position.x,y:o.position.y},p=$.getAttrBounds(f,s,u.name);if(!p)throw new Error('Unable to get attribue bounds for\n                 attribute "'+t.table+"."+t.attr+'": attribute doesnt exists');var y=$.getAttrBounds(c,d,l.name);if(!y)throw new Error('Unable to get attribue bounds for\n                 attribute "'+r.table+"."+r.attr+'": attribute doesnt exists');var h=fe(p,y);return{link:e,path:h}})}).reduce(function(e,t){return e.concat(t)},[]);return{metrics:i,selected:e.selected,tables:e.tables.map(function(e){l(e,te,"tableState");var n=function(e){return e}.call(t,e);return l(n,Q,"return value"),n}),newLink:u,links:f,dnd:r,tco:a}}.call(void 0,e);return l(t,d.default.Any,"return value"),t},se=function(e){l(e,J,"dispatch");var t=function(e){return{dispatch:e,onTableClick:function(t){l(t,Q,"tableShape"),e({type:"SELECT",target:"TABLE",table:t.table.name})},onTableMouseDown:function(t,n){l(t,Q,"tableShape"),l(n,oe,"point"),e({type:"START_DND",attrs:{type:"TABLE",table:t.table.name},startPoint:n})},onMouseUp:function(t){l(t,oe,"point"),e({type:"STOP_DND",point:t})},onAttrMouseDown:function(t,n,r){l(t,Q,"tableShape"),l(n,re,"attr"),l(r,oe,"point"),e({type:"START_DND",attrs:{type:"ATTR",attr:n.name,table:t.table.name},startPoint:r})},onLinkAddClick:function(t,n){l(t,Q,"tableShape"),l(n,re,"attr"),e({type:"START_TCO",attrs:{type:"ADD_LINK",attr:n.name,table:t.table.name}})},onLinkDeleteClick:function(t,n){l(t,Q,"tableShape"),l(n,re,"attr"),e({type:"DELETE_LINK",attr:n.name,table:t.table.name})},onAttrDeleteClick:function(t,n){l(t,Q,"tableShape"),l(n,re,"attr"),e({type:"DELETE_ATTR",attr:n.name,table:t.table.name})},onTableDeleteClick:function(t){l(t,Q,"tableShape"),e({type:"DELETE_TABLE",table:t.table.name})}}}.call(void 0,e);return l(t,d.default.Any,"return value"),t},de=function(e,t){var n=function(e,t){var n=e.tco,r=e.dnd,a=e.tables,o=e.metrics,i=t.dispatch;return c({},e,t,{onSchemeClick:function(){i(n!==!1?{type:"STOP_TCO"}:{type:"CANCEL_SELECT"})},onMouseMove:function(e){l(e,oe,"point"),i({type:"MOUSE_MOVE",point:e}),r!==!1&&("TABLE"===r.type?!function(){var t=r.lastPoint,n=r.table,o=a.filter(function(e){return e.table.name===n})[0];if(o){var u={x:e.x-t.x,y:e.y-t.y};i({type:"MOVE_TABLE",table:n,position:{x:o.position.x+u.x,y:o.position.y+u.y}})}}():"ATTR"===r.type&&!function(){var t=r.attr,n=r.table,u=a.filter(function(e){return e.table.name===n})[0],l=o.tables.filter(function(e){var t=e.name;return t===n})[0].metrics,f=u.table.attrs.filter(function(t){var n=t.name,r=$.getAttrBounds(l,u.position,n);return!!r&&(e.y>r.y&&e.y<r.y+r.height&&e.x>r.x&&e.x<r.x+r.width)})[0];f&&f.name!==t&&i({type:"SWITCH_ATTRS",table:n,attr1:t,attr2:f.name})}(),i({type:"UPDATE_DND",lastPoint:e}))},onAttrClick:function(e,t){l(e,Q,"tableShape"),l(t,re,"attr"),n!==!1?"ADD_LINK"===n.type&&(i({type:"STOP_TCO"}),i({type:"ADD_LINK",from:{table:n.table,attr:n.attr},to:{table:e.table.name,attr:t.name}})):i({type:"SELECT",target:"ATTR",table:e.table.name,attr:t.name})},onAttrCreate:function(e,t){l(e,d.default.String,"table"),l(t,re,"attr"),i({type:"ADD_ATTR",table:e,attr:t})},onTableCreate:function(e){l(e,ie,"table"),i({type:"ADD_TABLE",table:e})}})}.call(void 0,e,t);return l(n,d.default.Any,"return value"),n};d.default.interface({tables:d.default.list(Q),links:d.default.list(Z),newLink:d.default.maybe(ue),metrics:le,selected:ne,onTableClick:d.default.Function,onTableDeleteClick:d.default.Function,onSchemeClick:d.default.Function,onTableMouseDown:d.default.Function,onAttrClick:d.default.Function,onLinkAddClick:d.default.Function,onLinkDeleteClick:d.default.Function,onAttrDeleteClick:d.default.Function,onAttrMouseDown:d.default.Function,onAttrCreate:d.default.Function,onTableCreate:d.default.Function,onMouseMove:d.default.Function,onMouseUp:d.default.Function},"TProps"),d.default.interface({attrCreateModal:d.default.union([d.default.refinement(d.default.Boolean,function(e){return e===!1}),d.default.interface({table:d.default.String})]),tableCreateModal:d.default.Boolean},"TRootState");t.default=(0,h.connect)(ce,se,de)(function(e){function t(){var e,n,r,a;o(this,t);for(var u=arguments.length,f=Array(u),c=0;c<u;c++)f[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),r.state={attrCreateModal:!1,tableCreateModal:!1},r.handleAttrCreateClick=function(e){l(e,Q,"tableShape"),r.setState({attrCreateModal:{table:e.table.name}})},r.handleAttrCreate=function(e,t){l(e,d.default.String,"table"),l(t,re,"attr"),r.setState({attrCreateModal:!1},function(){r.props.onAttrCreate(e,t)})},r.handleAttrCancel=function(){r.setState({attrCreateModal:!1})},r.handleTableCreateClick=function(){r.setState({tableCreateModal:!0})},r.handleTableCreate=function(e){l(e,ie,"table"),r.setState({tableCreateModal:!1},function(){r.props.onTableCreate(e)})},r.handleTableCancel=function(){r.setState({tableCreateModal:!1})},r.handleExportToPng=function(){var e=function(e,t){l(e,d.default.String,"filename"),l(t,d.default.String,"dataUrl");var n=window.document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)},t=document.createElement("canvas");t.setAttribute("width","800"),t.setAttribute("height","600");var n=t.getContext("2d");n&&!function(){var r=new Image;r.onload=function(){n.drawImage(r,0,0);var a=t.toDataURL("image/png");e("scheme.png",a)};var a=(new XMLSerializer).serializeToString(document.querySelector("#for_export svg")),o=window.btoa(a);r.src="data:image/svg+xml;base64,"+o}()},a=n,i(r,a)}return u(t,e),f(t,[{key:"render",value:function(){var e=function(){var e=800,t=600;return y.default.createElement("div",{className:"root"},y.default.createElement("div",null,y.default.createElement("button",{onClick:this.handleTableCreateClick},"Create table")),y.default.createElement("div",null,y.default.createElement("button",{onClick:this.handleExportToPng},"Export to PNG")),y.default.createElement("div",{style:{display:"none"},id:"for_export"},y.default.createElement(F.default,{style:G.schemeStyle,size:{width:e,height:t},tables:this.props.tables,links:this.props.links,selected:!1,metrics:this.props.metrics,onClick:function(){},onMouseMove:function(){},onAttrClick:function(){},onLinkAddClick:function(){},onLinkDeleteClick:function(){},onAttrDeleteClick:function(){},onAttrMouseDown:function(){},onTableClick:function(){},onTableMouseDown:function(){},onTableDeleteClick:function(){},onMouseUp:function(){},onAttrCreateClick:function(){},newLink:null})),y.default.createElement("div",{className:"root__wrapper"},y.default.createElement(K.default,{selected:this.props.selected,metrics:this.props.metrics,tables:this.props.tables,onMouseMove:this.props.onMouseMove,onAttrClick:this.props.onAttrClick,onLinkAddClick:this.props.onLinkAddClick,onLinkDeleteClick:this.props.onLinkDeleteClick,onAttrDeleteClick:this.props.onAttrDeleteClick,onTableDeleteClick:this.props.onTableDeleteClick,onMouseUp:this.props.onMouseUp,onAttrCreateClick:this.handleAttrCreateClick}),y.default.createElement(F.default,{style:G.schemeStyle,size:{width:e,height:t},tables:this.props.tables,links:this.props.links,selected:this.props.selected,metrics:this.props.metrics,onClick:this.props.onSchemeClick,onMouseMove:this.props.onMouseMove,onAttrClick:this.props.onAttrClick,onLinkAddClick:this.props.onLinkAddClick,onLinkDeleteClick:this.props.onLinkDeleteClick,onAttrDeleteClick:this.props.onAttrDeleteClick,onAttrMouseDown:this.props.onAttrMouseDown,onTableClick:this.props.onTableClick,onTableMouseDown:this.props.onTableMouseDown,onTableDeleteClick:this.props.onTableDeleteClick,onMouseUp:this.props.onMouseUp,onAttrCreateClick:this.handleAttrCreateClick,newLink:this.props.newLink})),this.state.attrCreateModal!==!1&&y.default.createElement(H.default,{table:this.state.attrCreateModal.table,onSave:this.handleAttrCreate,onCancel:this.handleAttrCancel}),this.state.tableCreateModal!==!1&&y.default.createElement(q.default,{onSave:this.handleTableCreate,onCancel:this.handleTableCancel}))}.call(this);return l(e,d.default.Any,"return value"),e}}]),t}(y.default.Component))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TTableShape=void 0;var a=n(1),o=r(a),i=n(247),u=n(250);t.TTableShape=o.default.interface({table:i.TTable,position:u.TPoint},"TTableShape")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TLinkShape=void 0;var a=n(1),o=r(a),i=(n(249),n(256));t.TLinkShape=o.default.interface({path:i.TPath},"TLinkShape")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TPath=void 0;var a=n(1),o=r(a),i=n(250);t.TPath=o.default.list(i.TPoint,"TPath")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TSchemeMetrics=t.TTableMetrics=void 0;var o=n(1),i=a(o),u=n(258),l=r(u),f=l.TSize||i.default.Any,c=i.default.interface({size:f},"TAttrMetrics"),s=i.default.interface({size:f},"TTableHeaderMetrics"),d=t.TTableMetrics=i.default.interface({size:f,header:s,attrs:i.default.list(i.default.interface({name:i.default.String,metrics:c}))},"TTableMetrics");t.TSchemeMetrics=i.default.interface({tables:i.default.list(i.default.interface({name:i.default.String,metrics:d}))},"TSchemeMetrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TSize=void 0;var a=n(1),o=r(a);t.TSize=o.default.interface({width:o.default.Number,height:o.default.Number},"TSize")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(254),h=r(y),b=n(255),m=r(b),v=n(258),T=r(v),g=n(260),_=r(g),S=n(256),w=r(S),A=n(250),E=r(A),P=n(248),O=r(P),k=n(257),M=r(k),C=n(246),x=r(C),j=n(269),D=a(j),N=n(272),L=a(N),I=h.TTableShape||s.default.Any,B=m.TLinkShape||s.default.Any,R=T.TSize||s.default.Any,F=_.TSchemeStyle||s.default.Any,z=w.TPath||s.default.Any,K=(E.TPoint||s.default.Any,O.TAttr||s.default.Any,M.TSchemeMetrics||s.default.Any),U=x.TSelected||s.default.Any,H=(s.default.interface({selected:U,metrics:K,tables:s.default.list(I),newLink:s.default.maybe(z),links:s.default.list(B),style:F,size:R,onTableClick:s.default.Function,onTableMouseDown:s.default.Function,onAttrMouseDown:s.default.Function,onAttrClick:s.default.Function,onMouseMove:s.default.Function,onMouseUp:s.default.Function,onClick:s.default.Function},"TProps"),function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tables,r=t.links,a=t.style,o=t.size,i=t.metrics,u=t.selected,f=t.newLink,c=o.width,d=o.height;return p.default.createElement("svg",{className:"scheme",viewBox:"0 0 "+c+" "+d,width:c,height:d,onMouseUp:function(t){return e.props.onMouseUp({x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY})},onMouseMove:function(t){return e.props.onMouseMove({x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY})},ref:function(t){e.schemeEl=t},onClick:function(t){t.target===e.schemeEl&&e.props.onClick()}},r.map(function(t){l(t,B,"linkShape");var n=function(e){var t=e.path,n="link-"+t.map(function(e){var t=e.x,n=e.y;return t+","+n}).join(";");return p.default.createElement(L.default,{key:n,path:e.path,style:a.link})}.call(e,t);return l(n,s.default.Any,"return value"),n}),n.map(function(t){l(t,I,"tableShape");var n=i.tables.filter(function(e){var n=e.name;return n===t.table.name})[0].metrics,r=!1;return u!==!1&&"TABLE"===u.type&&u.table===t.table.name?r={type:"TABLE"}:u!==!1&&"ATTR"===u.type&&u.table===t.table.name&&(r={type:"ATTR",name:u.attr}),p.default.createElement(D.default,{selected:r,metrics:n,style:a.table,key:t.table.name,tableShape:t,onHeaderClick:e.props.onTableClick,onHeaderMouseDown:e.props.onTableMouseDown,onAttrMouseDown:e.props.onAttrMouseDown,onAttrClick:e.props.onAttrClick})}),f&&p.default.createElement(L.default,{path:f,style:a.newLink}))}}]),t}(p.default.Component));t.default=H},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TSchemeStyle=void 0;var a=n(1),o=r(a),i=n(261),u=n(268);t.TSchemeStyle=o.default.interface({table:i.TTableStyle,link:u.TLinkStyle,newLink:u.TLinkStyle},"TSchemeStyle")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TTableStyle=void 0;var a=n(1),o=r(a),i=n(262),u=n(264),l=n(266),f=n(267);t.TTableStyle=o.default.interface({font:i.TFontStyle,header:f.TTableHeaderStyle,border:l.TBorder,attrs:u.TAttrStyle},"TTableStyle")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TFontStyle=void 0;var a=n(1),o=r(a),i=n(263);t.TFontStyle=o.default.interface({color:i.TColor,size:o.default.Number,weight:o.default.String,family:o.default.String,style:o.default.String},"TFontStyle")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TColor=void 0;var a=n(1),o=r(a);t.TColor=o.default.String},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TAttrStyle=void 0;var a=n(1),o=r(a),i=n(262),u=n(265);t.TAttrStyle=o.default.interface({font:i.TFontStyle,padding:u.TIndentStyle},"TAttrStyle")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TIndentStyle=void 0;var a=n(1),o=r(a);t.TIndentStyle=o.default.interface({top:o.default.Number,right:o.default.Number,bottom:o.default.Number,left:o.default.Number},"TIndentStyle")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TBorder=void 0;var a=n(1),o=r(a),i=n(263);t.TBorder=o.default.interface({color:i.TColor},"TBorder")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TTableHeaderStyle=void 0;var a=n(1),o=r(a),i=n(263),u=n(262),l=n(265);t.TTableHeaderStyle=o.default.interface({backgroundColor:i.TColor,font:u.TFontStyle,padding:l.TIndentStyle},"TTableHeaderStyle")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TLinkStyle=void 0;var a=n(1),o=r(a);t.TLinkStyle=o.default.interface({strokeStyle:o.default.enums.of(["solid","dashed"])},"TLinkStyle")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(254),h=r(y),b=n(261),m=r(b),v=n(250),T=r(v),g=n(248),_=r(g),S=n(257),w=r(S),A=n(270),E=a(A),P=n(271),O=a(P),k=h.TTableShape||s.default.Any,M=m.TTableStyle||s.default.Any,C=(T.TPoint||s.default.Any,_.TAttr||s.default.Any,w.TTableMetrics||s.default.Any),x=(s.default.interface({metrics:C,style:M,tableShape:k,selected:s.default.union([s.default.refinement(s.default.Boolean,function(e){return e===!1}),s.default.interface({type:s.default.enums.of(["TABLE"])}),s.default.interface({type:s.default.enums.of(["ATTR"]),name:s.default.String})]),onHeaderClick:s.default.Function,onHeaderMouseDown:s.default.Function,onAttrMouseDown:s.default.Function,onAttrClick:s.default.Function},"TProps"),function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"handleHeaderMouseDown",value:function(e,t){l(e,k,"tableShape"),l(t,s.default.Any,"e");var n=function(e,t){var n={x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY};this.props.onHeaderMouseDown.call(this,e,n)}.call(this,e,t);return l(n,s.default.Any,"return value"),n}},{key:"renderAttrs",value:function(){var e=this,t=this.props,n=t.tableShape,r=t.style,a=t.metrics,o=t.selected,i=n.table.attrs,u=n.position,l=u.x,f=u.y;return i.map(function(t,i){var u=a.attrs.filter(function(e){var n=e.name;return n===t.name})[0].metrics.size;return p.default.createElement(O.default,{key:t.name,name:t.name,style:r.attrs,active:o!==!1&&"ATTR"===o.type&&o.name===t.name,size:u,position:{x:l,y:f+u.height*i+a.header.size.height},onMouseDown:e.props.onAttrMouseDown.bind(e,n,t),onClick:e.props.onAttrClick.bind(e,n,t)})})}},{key:"renderHeader",value:function(){var e=this.props,t=e.tableShape,n=e.style,r=e.metrics,a=e.onHeaderClick,o=(e.selected,t.table),i=t.position,u=i.x,l=i.y,f=r.header.size,c=f.width,s=f.height,d=n.header.padding;return p.default.createElement("g",null,p.default.createElement("rect",{x:u,y:l,width:c,height:s,fill:n.header.backgroundColor}),p.default.createElement("text",{alignmentBaseline:"middle",fontFamily:n.font.family,x:u+d.left,y:l+s/2,width:c,height:s,fontSize:n.header.font.size,fill:n.header.font.color},o.name),p.default.createElement(E.default,{onClick:a.bind(this,t)},p.default.createElement("rect",{x:u,y:l,width:c,height:s,fill:"transparent",onMouseDown:this.handleHeaderMouseDown.bind(this,t)})))}},{key:"render",value:function(){var e=this.props,t=e.tableShape,n=e.style,r=e.metrics,a=e.selected,o=t.position,i=o.x,u=o.y,l=r.size,f=l.width,c=l.height,s=a!==!1&&"TABLE"===a.type;return p.default.createElement("g",null,p.default.createElement("defs",null,p.default.createElement("filter",{id:"active_table_filter",x:"-50%",y:"-50%",width:"200%",height:"200%"},p.default.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"0",dy:"0"}),p.default.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"10"}),p.default.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}),p.default.createElement("feComponentTransfer",null,p.default.createElement("feFuncA",{type:"linear",slope:"0.2"})))),s&&p.default.createElement("rect",{filter:"url(#active_table_filter)",x:i,y:u,width:f,height:c,fill:"black"}),p.default.createElement("rect",{x:i,y:u,width:f,height:c,fill:"white",stroke:n.border.color,strokeWidth:"1"}),this.renderHeader(),this.renderAttrs())}}]),t}(p.default.Component));t.default=x},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(250),h=r(y),b=h.TPoint||s.default.Any,m=(s.default.interface({onClick:s.default.Function,children:s.default.maybe(s.default.Any)},"TProps"),s.default.interface({start:s.default.maybe(b)},"TState"),3),v=function(e){function t(){var e,n,r,a;o(this,t);for(var u=arguments.length,f=Array(u),c=0;c<u;c++)f[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),r.state={start:null},r.handleMouseDown=function(e){l(e,s.default.Any,"e"),r.setState({start:{x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}})},r.handleMouseLeave=function(){null!==r.state.start&&r.setState({start:null})},r.handleMouseUp=function(e){l(e,s.default.Any,"e");var t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},n=r.state.start;n&&Math.abs(t.x-n.x)<m&&Math.abs(t.y-n.y)<m&&r.props.onClick()},a=n,i(r,a)}return u(t,e),f(t,[{key:"render",value:function(){return p.default.createElement("g",{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},this.props.children)}}]),t}(p.default.Component);t.default=v},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(264),h=r(y),b=n(250),m=r(b),v=n(258),T=r(v),g=n(270),_=a(g),S=h.TAttrStyle||s.default.Any,w=m.TPoint||s.default.Any,A=T.TSize||s.default.Any,E=(s.default.interface({name:s.default.String,style:S,active:s.default.Boolean,size:A,position:w,onMouseDown:s.default.Function,onClick:s.default.Function},"TProps"),function(e){function t(){var e,n,r,a,u=this;o(this,t);for(var f=arguments.length,c=Array(f),d=0;d<f;d++)c[d]=arguments[d];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleMouseDown=function(e){l(e,s.default.Any,"e");var t=function(e){r.props.onMouseDown({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})}.call(u,e);return l(t,s.default.Any,"return value"),t},a=n,i(r,a)}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.style,r=e.active,a=e.size,o=a.width,i=a.height,u=e.position,l=u.x,f=u.y;return p.default.createElement("g",{key:"attr-"+t,x:l,y:f,onMouseDown:this.handleMouseDown},p.default.createElement("defs",null,p.default.createElement("filter",{id:"active_attr_filter",x:"-50%",y:"-50%",width:"200%",height:"200%"},p.default.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"0",dy:"0"}),p.default.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"10"}),p.default.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}),p.default.createElement("feComponentTransfer",null,p.default.createElement("feFuncA",{type:"linear",slope:"0.2"})))),p.default.createElement(_.default,{onClick:this.props.onClick},r&&p.default.createElement("rect",{filter:"url(#active_attr_filter)",x:l+1,y:f,width:o-2,height:i,fill:"black"}),r&&p.default.createElement("rect",{x:l+1,y:f,width:o-2,height:i,fill:"white"}),p.default.createElement("text",{fontFamily:n.font.family,fontWeight:r?"bold":"normal",alignmentBaseline:"middle",x:l+n.padding.left,y:f+i/2,fontSize:n.font.size},t),p.default.createElement("rect",{x:l,y:f,width:o,height:i,fill:"transparent",onMouseDown:this.handleMouseDown})))}}]),t}(p.default.Component));t.default=E},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(268),h=r(y),b=n(256),m=r(b),v=h.TLinkStyle||s.default.Any,T=m.TPath||s.default.Any,g=(s.default.interface({path:T,style:v},"TProps"),0),_=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=function(){var e=this.props,t=e.path,n=e.style,r=t.map(function(e){var t=e.x,n=e.y;return t+","+n}).join(" "),a="marker-end."+(g+=1),o="marker-start."+(g+=1);return p.default.createElement("g",{className:"svg-link"},p.default.createElement("defs",null,p.default.createElement("marker",{id:o,viewBox:"0 0 10 10",refX:"0",refY:"2",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},p.default.createElement("circle",{cx:"3",cy:"3",r:"3",fill:"black"})),p.default.createElement("marker",{id:a,markerWidth:"13",markerHeight:"13",refX:"10",refY:"6",orient:"auto"},p.default.createElement("path",{d:"M2,2 L2,11 L10,6 L2,2",fill:"black"}))),p.default.createElement("polyline",{fill:"none",stroke:"black",points:r,strokeDasharray:"dashed"===n.strokeStyle?"5,5":null,style:{markerStart:"url(#"+o+")",markerEnd:"url(#"+a+")"}}))}.call(this);return l(e,s.default.Any,"return value"),e}}]),t}(p.default.Component);t.default=_},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return d.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+d.default.getTypeName(t)]):e instanceof t||d.default.fail("Invalid value "+d.default.stringify(e)+" supplied to "+n+" (expected a "+d.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),d=a(s),p=n(221),y=a(p),h=n(254),b=r(h),m=n(250),v=r(m),T=n(248),g=r(T),_=n(257),S=r(_),w=n(246),A=r(w),E=n(274),P=b.TTableShape||d.default.Any,O=(v.TPoint||d.default.Any,g.TAttr||d.default.Any),k=(S.TSchemeMetrics||d.default.Any,A.TSelected||d.default.Any),M=d.default.interface({x:d.default.Number,y:d.default.Number,v:d.default.enums.of(["start","center","end"]),h:d.default.enums.of(["start","center","end"]),children:d.default.maybe(d.default.Any)},"TPositionProps"),C=function(e){l(e,M,"props");var t=e.x,n=e.y,r=e.v,a=e.h,o=e.children;return y.default.createElement("div",{className:"controls__position",style:{left:t+"px",top:n+"px"}},y.default.createElement("div",{className:"controls__container v-"+r+" h-"+a},o))},x=d.default.interface({orientation:d.default.enums.of(["v","h"]),children:d.default.maybe(d.default.Any)},"TPanelProps"),j=function(e){l(e,x,"props");var t=e.children,n=e.orientation;return y.default.createElement("div",{className:"controls__panel orientation-"+n},t)},D=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"renderSelectedTableControls",value:function(e){l(e,P,"tableShape");var t=e.position,n=t.x,r=t.y,a=this.props.metrics,o=a.tables.filter(function(t){return t.name===e.table.name})[0].metrics;if(!o)throw new Error('Table "'+e.table.name+"\" doesn't have metrics");var i=o.size,u=i.width,f=i.height,c=5;return y.default.createElement(C,{x:n+u/2,y:r+f+c,v:"start",h:"center"},y.default.createElement(j,{orientation:"v"},y.default.createElement("button",{className:"controls__button",onClick:this.props.onTableDeleteClick.bind(this,e)},"Delete"),y.default.createElement("button",{className:"controls__button",onClick:this.props.onAttrCreateClick.bind(this,e)},"+ attr")))}},{key:"renderSelectedAttributeControls",value:function(e,t){l(e,P,"tableShape"),l(t,O,"attr");var n=e.position,r=this.props.metrics,a=r.tables.filter(function(t){return t.name===e.table.name})[0].metrics;if(!a)throw new Error('Table "'+e.table.name+"\" doesn't have metrics");var o=(0,E.getAttrBounds)(a,n,t.name);if(!o)throw new Error('Metrics calculation failed for attribute "'+e.table.name+"."+t.name+'"');var i=e.table.foreignKeys.some(function(e){var n=e.from;return n.attr===t.name}),u=o.width,f=o.height,c=o.x,s=o.y,d=5;return y.default.createElement(C,{x:c+u+d,y:s+f/2,v:"center",h:"start"},y.default.createElement(j,{orientation:"h"},!i&&y.default.createElement("button",{className:"controls__button",onClick:this.props.onLinkAddClick.bind(this,e,t)},"+ link"),i&&y.default.createElement("button",{className:"controls__button",onClick:this.props.onLinkDeleteClick.bind(this,e,t)},"- link"),y.default.createElement("button",{className:"controls__button",onClick:this.props.onAttrDeleteClick.bind(this,e,t)},"Delete")))}},{key:"renderSelected",value:function(e){var t=this;l(e,k,"selected");var n=this.props.tables;if(e!==!1&&"TABLE"===e.type){var r=function(){var r=e.table,a=n.filter(function(e){return r===e.table.name})[0];if(!a)throw new Error("Selected table doesn't exists \""+r+'"');return{v:t.renderSelectedTableControls(a)}}();if("object"===("undefined"==typeof r?"undefined":f(r)))return r.v}else if(e!==!1&&"ATTR"===e.type){var a=function(){var r=e.table,a=e.attr,o=n.filter(function(e){return r===e.table.name})[0],i=o.table.attrs.filter(function(e){var t=e.name;return t===a})[0];return{v:t.renderSelectedAttributeControls(o,i)}}();if("object"===("undefined"==typeof a?"undefined":f(a)))return a.v}return null}},{key:"render",value:function(){var e=this.props.selected;return y.default.createElement("div",{className:"controls"},y.default.createElement("div",null,e!==!1&&this.renderSelected(e)))}}]),t}(y.default.Component);t.default=D},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return f.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+f.default.getTypeName(t)]):e instanceof t||f.default.fail("Invalid value "+f.default.stringify(e)+" supplied to "+n+" (expected a "+f.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getMetrics=t.getHeaderBounds=t.getTableBounds=t.getAttrBounds=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1),f=a(l),c=n(247),s=r(c),d=n(261),p=r(d),y=n(252),h=r(y),b=n(250),m=r(b),v=n(257),T=r(v),g=n(275),_=s.TTable||f.default.Any,S=p.TTableStyle||f.default.Any,w=h.TBounds||f.default.Any,A=m.TPoint||f.default.Any,E=T.TTableMetrics||f.default.Any;t.getAttrBounds=function(e,t,n){i(e,E,"tableMetrics"),i(t,A,"position"),i(n,f.default.String,"attr");var r=function(e,t,n){for(var r=e.attrs,a=e.header,o=0;o<r.length;++o){var i=r[o],l=i.name,f=i.metrics;if(l===n)return u({},f.size,{x:t.x,y:f.size.height*o+t.y+a.size.height})}return null}.call(void 0,e,t,n);return i(r,f.default.maybe(w),"return value"),r},t.getTableBounds=function(e,t){i(e,E,"tableMetrics"),i(t,A,"position");var n=function(e,t){var n=e.attrs,r=e.header;return u({},t,{width:r.size.width,height:r.size.height+n.reduce(function(e,t){return e+t.metrics.size.height},0)})}.call(void 0,e,t);return i(n,f.default.maybe(w),"return value"),n},t.getHeaderBounds=function(e,t){i(e,E,"metrics"),i(t,A,"position");var n=function(e,t){var n=e.header;return u({},t,{width:n.size.width,height:n.size.height})}.call(void 0,e,t);return i(n,f.default.maybe(w),"return value"),n},t.getMetrics=function(e,t){i(e,_,"table"),i(t,S,"style");var n=function(e,t){var n=(0,g.getTextSize)(e.name,t.font),r=e.attrs.map(function(e){var n=e.name;return(0,g.getTextSize)(n,t.font)}),a={width:n.width+t.header.padding.left+t.header.padding.right,height:n.height+t.header.padding.top+t.header.padding.bottom},i=r.map(function(e){var n=e.width,r=e.height;return{width:n+t.attrs.padding.left+t.attrs.padding.right,height:r+t.attrs.padding.top+t.attrs.padding.bottom}}),u=Math.max.apply(Math,[a.width].concat(o(i.map(function(e){var t=e.width;return t}))));return{size:{width:u,height:a.height+i.map(function(e){var t=e.height;return t}).reduce(function(e,t){return e+t},0)},header:{size:{width:u,height:a.height}},attrs:e.attrs.map(function(e,t){return{name:e.name,metrics:{size:{width:u,height:i[t].height}}}})}}.call(void 0,e,t);return i(n,E,"return value"),n}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return u.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+u.default.getTypeName(t)]):e instanceof t||u.default.fail("Invalid value "+u.default.stringify(e)+" supplied to "+n+" (expected a "+u.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTextSize=void 0;var i=n(1),u=a(i),l=n(262),f=r(l),c=f.TFontStyle||u.default.Any,s=u.default.interface({width:u.default.Number,height:u.default.Number},"TMeasureResult"),d=null;t.getTextSize=function(e,t){o(e,u.default.String,"text"),o(t,c,"style");var n=function(e,t){var n=t.size,r=t.weight,a=t.family,i=t.style,l=r+" "+i+" "+n+"px "+a;if(null===d){var f=document.createElement("canvas");d=o(o(f.getContext("2d"),u.default.Any,"canvas.getContext('2d')"),CanvasRenderingContext2D,"(canvas.getContext('2d'): any)")}return d.font=l,{width:d.measureText(e).width,height:n}}.call(void 0,e,t);return o(n,s,"return value"),n}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(248),h=r(y),b=n(277),m=a(b),v=(h.TAttr||s.default.Any,s.default.interface({table:s.default.String,onCancel:s.default.Function,onSave:s.default.Function},"TProps"),function(e){function t(){var e,n,r,a;o(this,t);for(var u=arguments.length,f=Array(u),c=0;c<u;c++)f[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),r.handleSubmit=function(e){l(e,s.default.Any,"e"),e.preventDefault(),r.props.onSave(r.props.table,{name:r.nameInputEl.value})},r.handleCancel=function(e){l(e,s.default.Any,"e"),r.props.onCancel()},a=n,i(r,a)}return u(t,e),f(t,[{key:"render",value:function(){var e=this;return p.default.createElement(m.default,null,p.default.createElement("form",{onSubmit:this.handleSubmit},p.default.createElement("div",null,p.default.createElement("label",null,"Name: ",p.default.createElement("input",{ref:function(t){e.nameInputEl=t}}))),p.default.createElement("div",null,p.default.createElement("button",{type:"button",onClick:this.handleCancel},"Cancel"),p.default.createElement("button",{type:"submit"},"Create"))))}}]),t}(p.default.Component));t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(221),f=r(l),c=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return f.default.createElement("div",{className:"modal"},f.default.createElement("div",{className:"modal__body"},this.props.children))}}]),t}(f.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return s.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+s.default.getTypeName(t)]):e instanceof t||s.default.fail("Invalid value "+s.default.stringify(e)+" supplied to "+n+" (expected a "+s.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),s=a(c),d=n(221),p=a(d),y=n(247),h=r(y),b=n(277),m=a(b),v=(h.TTable||s.default.Any,s.default.interface({onCancel:s.default.Function,onSave:s.default.Function},"TProps"),function(e){function t(){var e,n,r,a;o(this,t);for(var u=arguments.length,f=Array(u),c=0;c<u;c++)f[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),r.handleSubmit=function(e){l(e,s.default.Any,"e"),e.preventDefault(),r.props.onSave({name:r.nameInputEl.value,attrs:[],foreignKeys:[]})},r.handleCancel=function(e){l(e,s.default.Any,"e"),r.props.onCancel()},a=n,i(r,a)}return u(t,e),f(t,[{key:"render",value:function(){var e=this;return p.default.createElement(m.default,null,p.default.createElement("form",{onSubmit:this.handleSubmit},p.default.createElement("div",null,p.default.createElement("label",null,"Name: ",p.default.createElement("input",{ref:function(t){e.nameInputEl=t}}))),p.default.createElement("div",null,p.default.createElement("button",{type:"button",onClick:this.handleCancel},"Cancel"),p.default.createElement("button",{type:"submit"},"Create"))))}}]),t}(p.default.Component));t.default=v},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return u.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+u.default.getTypeName(t)]):e instanceof t||u.default.fail("Invalid value "+u.default.stringify(e)+" supplied to "+n+" (expected a "+u.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),u=a(i),l=n(246),f=r(l),c=n(257),s=r(c),d=n(280),p=n(281),y=n(274),h=f.TState||u.default.Any,b=f.TTableState||u.default.Any,m=(s.TSchemeMetrics||u.default.Any,s.TTableMetrics||u.default.Any),v=function(e){o(e,h,"state");var t=function(e){return e.tables}.call(void 0,e);return o(t,u.default.list(b),"return value"),t},T=(0,d.createSelector)(v,function(e){o(e,u.default.list(b),"tableStates");var t=function(e){return e.map(function(e){var t=e.table;return{name:t.name,metrics:(0,y.getMetrics)(t,p.schemeStyle.table)}})}.call(void 0,e);return o(t,u.default.list(u.default.interface({name:u.default.String,metrics:m})),"return value"),t});t.scheme=o((0,d.createSelector)(T,function(e){return{tables:e}}),u.default.Function,"scheme")},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function a(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,a=null;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return null!==n&&n.length===o.length&&o.every(function(e,r){return t(e,n[r])})||(a=e.apply(void 0,o)),n=o,a}}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];var u=0,l=a.pop(),f=o(a),c=e.apply(void 0,[function(){return u++,l.apply(void 0,arguments)}].concat(r)),s=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var i=f.map(function(n){return n.apply(void 0,[e,t].concat(a))});return c.apply(void 0,n(i))};return s.resultFunc=l,s.recomputations=function(){return u},s.resetRecomputations=function(){return u=0},s}}function u(e){var t=arguments.length<=1||void 0===arguments[1]?l:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=i,t.createStructuredSelector=u;var l=t.createSelector=i(a)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return l.default.isType(t)&&"struct"!==t.meta.kind?t.is(e)||t(e,[n+": "+l.default.getTypeName(t)]):e instanceof t||l.default.fail("Invalid value "+l.default.stringify(e)+" supplied to "+n+" (expected a "+l.default.getTypeName(t)+")"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.schemeStyle=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(1),l=a(u),f=n(260),c=r(f),s=c.TSchemeStyle||l.default.Any,d={color:"black",size:18,style:"normal",weight:"normal",family:"sans-serif"},p=i({},d,{color:"white"}),y={font:d,attrs:{font:d,padding:{top:3,right:5,bottom:3,left:5}},header:{padding:{top:4,right:5,bottom:4,left:5},backgroundColor:"#0053a0",font:p},border:{color:"#0053a0"}},h={strokeStyle:"solid"},b={strokeStyle:"dashed"};t.schemeStyle=o({table:y,link:h,newLink:b},s,"schemeStyle")}]);